<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Magic 8 Ball</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="main.css" rel="stylesheet"></link>
    <script src='shake.js'></script>

</head>
<body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
            <![endif]-->

            <span class='instructions'>Click/tap the ball, or shake device to answer your question.</span>

            <section class="stage">
            	<figure class="ball">
            		<span class="shadow"></span>
            		<span class="eight"></span>
            		<span class="answer move-stars">Yes</span>
            	</figure>
            </section>


            <script type="text/javascript">
            (function() {

            	var ball = document.getElementsByClassName('ball')[0];
            	var answer = document.getElementsByClassName('answer')[0];
            	var answerList = ['It is certain', 'It is decidedly so', 'Without a doubt', 'Definitely', 'You may rely on it', 'As I see it, yes','Most likely', 'Outlook good', 'Yes','Signs point to yes','Reply hazy, try again', 'Better not tell you now', 'Cannot predict', 'Concentrate and ask again','Don\'t count on it','No','My sources say No', 'Outlook not so good','Very doubtful','kl'];
            	var clickEvent = ('touchstart' in document) ? 'touchstart' : 'click';

            	function toggleClass(el, clazz) {
            		if(el.className.indexOf(clazz) > 0) {
            			el.className = el.className.replace(clazz, "");
            		} else {
            			el.className += (" " + clazz);
            		}
            	};
            	function shakeBall() {
            		ball.className += " shake";
            		answer.className = answer.className.replace("shown", "");
            		answer.innerHTML = "";
            		setTimeout(function() {
            			ball.className = ball.className.replace(" shake", "");
            			answer.innerHTML = getRandomArrayElement(answerList);
            			answer.className += " shown";
            			toggleClass(answer, "reverse");
            		}, 1000)
            	}

            	function getRandomArrayElement(arr) {
            		var rand = Math.floor((Math.random()*arr.length)+1);
            		return arr[rand];
            	}
            	function bindEvents() {
            		ball.addEventListener(clickEvent, shakeBall, false);
            		window.addEventListener('shake', shakeBall, false);
            	};

            	bindEvents();
            })();
            </script>
        </body>
        </html>